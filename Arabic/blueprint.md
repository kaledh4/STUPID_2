# NEON SPLASH: وثيقة تصميم اللعبة

## نظرة عامة
**المشروع:** NEON SPLASH  
**النوع:** ساحة تصويب 4 ضد 4 بتوليد تلقائي  
**الجمالية:** Vaporwave / حفلة مسبح نيون  
**الميكانيكية الأساسية:** نظام البلل (أطلق النار على الأعداء لتجميدهم)  
**حالة التطوير:** ما قبل الإنتاج  

---

## جدول المحتويات
1. [المفهوم الأساسي](#المفهوم-الأساسي)
2. [حلقة اللعب](#حلقة-اللعب)
3. [ميكانيكيات اللعب](#ميكانيكيات-اللعب)
4. [البنية التقنية](#البنية-التقنية)
5. [متطلبات الأصول](#متطلبات-الأصول)
6. [خطة التطوير](#خطة-التطوير)

---

## المفهوم الأساسي

### بيان الرؤية
إنشاء لعبة تصويب جماعية تنافسية غير عنيفة تؤكد على الطيف البصري واللعب السريع والتفاعل الاجتماعي بدلاً من آليات القتال التقليدية.

### الميزات الأساسية
- **نظام البلل:** استبدال الصحة بمقياس "البلل" الذي يتجمد اللاعبين عند 100%
- **خرائط تلقائية:** توليد خريطة مبني على الـ seed لتجربة لا نهائية
- **مخطط ألوان ديناميكي:** كل مباراة لها ألوان فريدة بناءً على الـ seed
- **مناسبة للعائلة:** بدون عنف أو قتل أو دماء - فقط متعة ومرح

### نقاط البيع الفريدة
- **منافسة غير سامة:** يتم تجميد اللاعبين بدلاً من قتلهم، مما يقلل الإحباط
- ** novelty البصري:** كل مباراة لها ألوان ومظاهر مختلفة
- **لعبة سريعة:** إحياء فوري ودورات سريعة
- **عناصر اجتماعية:** مشاركة الـ seed وبناء المجتمع

---

## حلقة اللعب

### تدفق المباراة
```
الوبي (التصويت على الـ Seed) → توليد الخريطة → معركة فريق (أول فريق يصل لـ 50 تجميد) → شاشة الانتصار
```

### هيكل الجلسة
1. **مرحلة الوبي:** ينضم اللاعبون ويصوتون على بذرة الخريطة
2. **مرحلة التحميل:** تُنشأ الخريطة بناءً على الـ seed المحدد
3. **مرحلة المباراة:** معركة فريق 4 ضد 4 حتى يصل أحد الفريقين إلى 50 تجميد
4. **مرحلة النتائج:** شاشة الانتصار مع الإحصائيات وخيارات مشاركة الـ seed

---

## ميكانيكيات اللعب

### نظام البلل (بديل الصحة)
- **مدى المقياس:** 0% (جاف) إلى 100% (مبلل بالكامل)
- **تطبيق الضرر:** شعاع الماء الفوري يضيف +15% بلل لكل ثانية من الاتصال المستمر
- **التجفيف السلبي:** -5% في الثانية عند عدم التعرض للضرب لمدة 3 ثوانٍ
- **التجفيف النشط:** محطات المناشف في القواعد تعيد التعيين إلى 0% فوراً
- **حالة التجميد:** عند 100٪، يصبح اللاعبون تماثيل جليدية لمدة 4 ثوانٍ
- **دعم الفريق:** يمكن للأصدقاء فك تجميد الزملاء باستخدام "الهواء الدافئ" كنار ثانوية

### ميكانيكيات التصويب (حل "اللا لاغ")
- **نوع السلاح:** مسدس ماء عالي الضغط
- **التقنية:** شعاع مرئي من جانب العميل + Raycast من جانب السيرفر
- **التأثير البصري:** شبكة أسطوانية مع قوام مائي متحرك يربط بين السلاح ونقطة التصويب
- **كشف الاصطدام:** يقوم السيرفر بـ raycast ؛ يشغل العميل ملاحظات فورية
- **الشعور:** استجابة فورية وحاسمة تشبه شعور "Ghostbusters proton pack"

### نظام الخريطة التلقائي
- **الهيكل:** "مسار" خطي مكون من 10 كتل
- **التخطيط:** `[قاعدة فريق أ] - [كتلة 1] - [كتلة 2] ... [كتلة 8] - [قاعدة فريق ب]`
- **أنواع الكتل:**
  - *النهر الكسول:* مسار منحني مع غطاء مائي
  - *الكابانا:* ارتفاعات مع فرص القفز على الأسطح
  - *الزحليقة:* منحدر زلق يعزز السرعة
  - *المنطقة العميقة:* منطقة مفتوحة مع مخاطرة/مكافأة استراتيجية
- **وضع التماثل:** تضمن البذور تكرار ترتيب الكتل لعدالة تنافسية

### نظام الألوان المعتمد على الـ Seed
- **الخوارزمية:** تُنشئ كل مباراة مخطط ألوان فريد بناءً على `MapSeed`
- **اللون الأساسي:** HSV(Seed % 360, 100, 100) للـ LEDs والتمييزات
- **اللون الثانوي:** لون مكمل لEffects الماء
- **لون الضباب:** إصدار مخفف التشبع من اللون الثانوي
- **النتيجة:** تنوع بصري لا نهائي مع مجموعات مثل "ذهبي وبنيفسجي" أو "وردي سايبربانك وأزرق"

---

## البنية التقنية

### إطار الشبكة
- **المكتبة:** Mirror Networking لـ Unity
- **الهندسة:** عميل-خادم مع خادم م(authoritative)
- **التنبؤ:** تنبؤ من جانب العميل مع مراجعة من جانب الخادم

### مكونات اللاعب
- **NetworkTransform:** مزامنة الموضع والدوران
- **PlayerStats (SyncVar):** تتبع `currentWetness` وتحديث واجهة المستخدم/المواد
- **WeaponController:** التعامل مع raycasting وتأثيرات الشعاع البصرية
- **متحكم الرسوم المتحركة:** مزامنة حركات الرسوم المتحركة للحركة والتصويب

### التأثيرات البصرية
- **تقديم الشعاع:** LineRenderer مع قوام مائي متحرك
- **تأثيرات الاصطدام:** أنظمة جسيمات لرذاذ الماء
- **تأثيرات التجميد:** مادة الثلج ورسوم متحركة للاعبين المجمدين
- **تحديثات واجهة المستخدم:** مقياس الرطوبة في الوقت الفعلي ومؤشرات الحالة

### التوليد التلقائي
- **الإنشاء من جانب الخادم:**
  - تهيئة حالة عشوائية مع البذرة
  - إنشاء كتل الـ prefabs في تسلسل
  - مزامنة البذرة لجميع العملاء عبر NetworkRoomManager
- **التطبيق من جانب العميل:**
  - استلام البذرة وتطبيق خوارزمية اللون
  - تعيين خصائص الـ shader العامة (`Shader.SetGlobalColor`)

---

## متطلبات الأصول

### النماذج ثلاثية الأبعاد (نمط منخفض المضلع)
- **الشخصيات:** 4 تنويعات (غواص، منقذ، سباح، عوامة بطة)
- **الأسلحة:** مسدس، سوبر سوكر، قناص (غسالة ضغط عالية)
- **البيئة:** بلاط المسبح، أشجار النخيل، أنابيب النيون، الأثاث البلاستيكي
- **القطع:** محطات المناشف، المنصات العائمة، العناصر الزخرفية

### أصول الصوت
- **effects الصوتية:**
  - رشة ماء عالية النبرة
  - أصوات طرطشة ثقيلة
  - صوت "ال Crack" للتجميد
  - صوت "مجفف الشعر" لفك التجميد
- **الموسيقى:** مقطوعات Synthwave/Vaporwave نشطة في الخلفية

### عناصر واجهة المستخدم
- **HUD:** مقاييس الرطوبة، عرض النتيجة، المؤقت
- **القوائم:** القائمة الرئيسية، الوبي، الإعدادات، شاشة الانتصار
- **الرموز:** اختيار السلاح، مؤشرات الحالة، التنقل

---

## خطة التطوير

### المرحلة 1: الأنظمة الأساسية (الأشهر 1-2)
- **الشهر 1: الأساس**
  - أسبوع 1-2: إعداد Mirror، متحكم اللاعب، مزامنة الشبكة
  - أسبوع 3-4: ميكانيكا التصويب الأساسية، نظام الرطوبة، حالة التجميد
  - المنتج النهائي: نموذج أولي حيث يمكن لـ 2 لاعب تجميد بعضهم البعض
- **الشهر 2: التوليد التلقائي**
  - أسبوع 1-2: بناء 4 كتل مسبقة، تنفيذ مولد الخريطة
  - أسبوع 3-4: نظام الألوان المعتمد على البذور، دمج واجهة المستخدم
  - المنتج النهائي: مباريات قابلة للعب على خرائط تم إنشاؤها عشوائيًا

### المرحلة 2: الفن والتحسين (الأشهر 3-4)
- **الشهر 3: التحسين البصري**
  - أسبوع 1-4: استيراد أصول منخفضة المضلع، إنشاء الـ shader الرئيسي، دمج الصوت
  - المنتج النهائي: تبدو اللعبة مميزة و"جاهزة لـ Steam"
- **الشهر 4: حلقة اللعبة وواجهة المستخدم**
  - أسبوع 1-4: القائمة الرئيسية، نظام الوبي، لوحة النتائج، المؤقت، محطات المناشف
  - المنتج النهائي: تدفق المباراة الكامل من الوبي إلى الانتصار

### المرحلة 3: المحتوى والإطلاق (الأشهر 5-6)
- **الشهر 5: توسيع المحتوى**
  - أسبوع 1-4: 6 أنواع كتل إضافية (المجموع 10)، 2 أنواع أسلحة إضافية، نظام المكافآت
  - المنتج النهائي: محتوى غني للعب الممتد
- **الشهر 6: التحسين والإطلاق**
  - أسبوع 1-3: اختبار بيتا مغلق، التوازن، إصلاح الأخطاء
  - أسبوع 4: **الإطلاق الرسمي**
  - المنتج النهائي: إصدار عام على Steam

---
